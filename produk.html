<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Produk DPD TESPOIN Majalengka</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-100 p-4">

<!-- MARQUEE -->
<marquee scrollamount="8"
  class="bg-gray-200 p-5 font-bold text-2xl">
ğŸ›’ Marketplace besar untuk barang baru & bekas â€¢ Upload produk Anda â€¢ Mari tumbuh & sukses bersama
</marquee>

<!-- SEARCH -->
<div class="max-w-6xl mx-auto mt-6 mb-6 px-4">
  <input
    id="searchProduk"
    type="text"
    placeholder="ğŸ” Cari produk (nama, deskripsi, lokasi)..."
    class="w-full border rounded-lg px-4 py-3 text-sm focus:ring-2 focus:ring-green-500"
  >
</div>

<!-- ================= PRODUK MITRA ================= -->
<h2 class="text-3xl font-bold text-green-700 mb-4">
ğŸŸ¢ Produk Mitra
</h2>

<p class="max-w-6xl mx-auto px-4 mb-6 text-gray-700">
Kami melayani berbagai kebutuhan, mulai dari produk harian hingga perlengkapan usaha.
</p>

<div class="max-w-6xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-4 px-4">

  <!-- MITRA ITEM -->
  <div class="product-card search-item bg-white rounded-xl shadow p-4 flex flex-col">
    <img src="IMG_20260204_130958.jpg" class="h-40 object-contain mb-2">
    <p class="text-sm">
      RELIFE RL-530 Contact Cleaner untuk PCB, konektor & port charger.
    </p>
    <p class="font-bold mt-2">Rp 35.000</p>
    <a href="https://wa.me/6282319264646" target="_blank"
       class="mt-auto bg-green-500 text-white py-2 rounded-xl text-center">
      Pesan WA
    </a>
  </div>

  <div class="product-card bg-white rounded-xl shadow p-4 flex flex-col">
    <img src="unlocktool.jpg" class="h-40 object-contain mb-2">
    <p class="font-semibold">UNLOCKTOOL â€“ Remote Service</p>
    <p class="text-sm">07:00 â€“ 24:00 WIB</p>
    <p class="font-bold mt-2">Rp 0</p>
    <a href="https://wa.me/6282319264646" target="_blank"
       class="mt-auto bg-green-500 text-white py-2 rounded-xl text-center">
      Pesan WA
    </a>
  </div>

</div>

<!-- PRODUK MEMBER -->
<h2 class="text-4xl font-bold mt-6 mb-6 text-orange-600">
ğŸŸ¡ Produk Member (7 Hari)
</h2>

<div class="max-w-6xl mx-auto px-4 py-10">

  <h3 class="text-2xl font-bold mb-3">
    ğŸ¤ Jual Produk Anda Bersama Kami
  </h3>

  <p class="mb-4 text-gray-700">
    Anda juga dapat memasukkan produk jualan Anda di sini untuk dijual.
    Punya barang atau usaha sendiri? Daftarkan produk Anda, dan biarkan kami membantu memasarkannya.
  </p>

  <a href="https://forms.gle/iCPE6H5YbxjWzkpN9"
     target="_blank"
     class="block text-center mb-6 bg-green-500 hover:bg-green-600 text-white py-3 px-4 rounded-xl font-semibold">
    â• Upload Produk Anda Di Sini
  </a>

  <!-- GRID PRODUK MEMBER -->
  <div id="produkMember" class="grid grid-cols-1 md:grid-cols-2 gap-3"></div>

  <a href="index.html" class="block text-center text-blue-600 mt-6">
    â† Kembali ke Beranda
  </a>

</div>
<!-- ================= SCRIPT MEMBER ================= -->
<script>
const sheetUrl = "https://docs.google.com/spreadsheets/d/19AfachAS9ZyNuut61RB1wqyI_AI6BsmNT1SIWhmSIn8/export?format=csv&gid=833555455";
const DURATION = 7 * 24 * 60 * 60 * 1000; // 7 hari

function parseTanggalID(t){
  if(!t) return null;
  const p = t.split(/[/ :]/);
  if(p.length < 3) return null;
  return new Date(p[2], p[1]-1, p[0], p[3]||0, p[4]||0, p[5]||0).getTime();
}

fetch(sheetUrl)
.then(r => r.text())
.then(t => {
  const rows = t.trim().split(/\r?\n/).slice(1);
  const box = document.getElementById("produkMember");

  rows.forEach(r => {
    const c = r.split(/,(?=(?:[^"]*"[^"]*")*[^"]*$)/);
    if(!c[1] || !c[7]) return;

    const upload = c[0];
    const nama = c[1];
    const deskripsi = c[2];
    const lokasi = c[10] || "";
    let harga = (c[7] || "").toString().replace(/[^0-9]/g, "");
harga = Number(harga);

// kalau harga kecil (di bawah 1000), anggap ribuan
if (harga > 0 && harga < 1000) {
  harga = harga * 1000;
}
    const wa = (c[8] || "").replace(/[^0-9]/g,"");
    let img = (c[9] || "").replace(/"/g,"");

    box.innerHTML += `
  <div class="member-item search-item bg-white rounded shadow p-3"
         data-upload="${upload}">
      <div class="member-timer text-xs font-semibold mb-1"></div>

      <button onclick="window.open('${img}','_blank')"
        class="block w-full text-blue-600 underline font-bold text-left">
        Lihat Foto Produk
      </button>

      <h3 class="text-lg font-bold mt-2">${nama}</h3>
      <p class="text-xs text-gray-600 mt-1">${deskripsi}</p>
      <p class="text-xs text-gray-500 mt-1">ğŸ“ ${lokasi}</p>

      <p class="text-green-600 font-bold mt-1">
        Rp ${harga.toLocaleString("id-ID")}
      </p>

      <a href="https://wa.me/${wa}?text=${encodeURIComponent(
        'Halo kak, saya mau tanya produk ' + nama + ', apakah masih ada?'
      )}"
      target="_blank"
      class="block bg-green-600 hover:bg-green-700 text-white text-center py-2 rounded mt-2">
        WhatsApp Penjual
      </a>
    </div>`;
  });

  updateMemberTimers();
  setInterval(updateMemberTimers, 1000);
});

function updateMemberTimers(){
  document.querySelectorAll('.member-item').forEach(card => {
    const start = parseTanggalID(card.dataset.upload);
    if(!start) return;

    const diff = start + DURATION - Date.now();
    if(diff <= 0){
      card.remove();
      return;
    }

    const d = Math.floor(diff / (1000*60*60*24));
    const h = Math.floor((diff % (1000*60*60*24)) / (1000*60*60));

    const timer = card.querySelector(".member-timer");
    if(timer){
      timer.textContent = `â³ Sisa ${d > 0 ? d + " hari " : ""}${h} jam`;
      timer.className =
        "member-timer text-xs font-semibold mb-1 " +
        (d <= 1 ? "text-red-600" : "text-orange-600");
    }
  });
}
</script>
<script>
document.addEventListener("DOMContentLoaded", () => {
  const input = document.getElementById("searchProduk");
  if(!input) return;

  input.addEventListener("input", function(){
    const keyword = this.value.toLowerCase().trim();
    const items = document.querySelectorAll(".search-item");

    items.forEach(item => {
      const text = item.innerText.toLowerCase();
      item.style.display = text.includes(keyword) ? "" : "none";
    });
  });
});
</script>
</body>
</html>