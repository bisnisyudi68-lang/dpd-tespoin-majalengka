<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Produk DPD TESPOIN Majalengka</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-100 p-4">

<!-- MARQUEE -->
<marquee scrollamount="8"
  class="bg-gray-200 p-5 font-bold text-2xl">
ğŸ›’ Marketplace besar untuk barang baru & bekas â€¢ Upload produk Anda â€¢ Mari tumbuh & sukses bersama
</marquee>

<!-- SEARCH -->
<div class="max-w-6xl mx-auto mt-6 mb-6 px-4">
  <input
    id="searchProduk"
    type="text"
    placeholder="ğŸ” Cari produk (nama, deskripsi, lokasi)..."
    class="w-full border rounded-lg px-4 py-3 text-sm focus:ring-2 focus:ring-green-500"
  >
</div>

<!-- ================= PRODUK MITRA ================= -->
<h2 class="text-3xl font-bold text-green-700 mb-4">
ğŸŸ¢ Produk Mitra
</h2>

<p class="max-w-6xl mx-auto px-4 mb-6 text-gray-700">
Kami melayani berbagai kebutuhan, mulai dari produk harian hingga perlengkapan usaha.
</p>

<div class="max-w-6xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-4 px-4">

  <!-- MITRA ITEM -->
  <div class="product-card bg-white rounded-xl shadow p-4 flex flex-col">
    <img src="IMG_20260204_130958.jpg" class="h-40 object-contain mb-2">
    <p class="text-sm">
      RELIFE RL-530 Contact Cleaner untuk PCB, konektor & port charger.
    </p>
    <p class="font-bold mt-2">Rp 35.000</p>
    <a href="https://wa.me/6282319264646" target="_blank"
       class="mt-auto bg-green-500 text-white py-2 rounded-xl text-center">
      Pesan WA
    </a>
  </div>

  <div class="product-card bg-white rounded-xl shadow p-4 flex flex-col">
    <img src="unlocktool.jpg" class="h-40 object-contain mb-2">
    <p class="font-semibold">UNLOCKTOOL â€“ Remote Service</p>
    <p class="text-sm">07:00 â€“ 24:00 WIB</p>
    <p class="font-bold mt-2">Rp 0</p>
    <a href="https://wa.me/6282319264646" target="_blank"
       class="mt-auto bg-green-500 text-white py-2 rounded-xl text-center">
      Pesan WA
    </a>
  </div>

</div>

<!-- ================= PRODUK MEMBER ================= -->
<h2 class="text-3xl font-bold text-orange-600 mt-10 mb-4">
ğŸŸ¡ Produk Member (7 Hari)
</h2>

<div class="max-w-6xl mx-auto px-4">

  <p class="text-gray-700 mb-4">
    Daftarkan produk Anda, dan kami bantu memasarkannya.
  </p>

  <a href="https://forms.gle/iCPE6H5YbxjWzkpN9" target="_blank"
     class="block mb-6 bg-green-500 text-white text-center py-3 rounded-xl font-semibold">
    â• Upload Produk Anda Di Sini
  </a>

  <div id="produkMember" class="grid grid-cols-1 md:grid-cols-2 gap-4"></div>

  <a href="index.html" class="block text-center text-blue-600 mt-8">
    â† Kembali ke Beranda
  </a>
</div>

<!-- ================= SCRIPT MEMBER ================= -->
<script>
const sheetUrl =
"https://docs.google.com/spreadsheets/d/19AfachAS9ZyNuut61RB1wqyI_AI6BsmNT1SIWhmSIn8/export?format=csv&gid=833555455";

const DURATION = 7 * 24 * 60 * 60 * 1000;

function parseTanggalID(t){
  const p = t.split(/[/ :]/);
  return new Date(p[2], p[1]-1, p[0], p[3]||0, p[4]||0).getTime();
}

fetch(sheetUrl)
.then(r=>r.text())
.then(t=>{
  const rows = t.trim().split(/\r?\n/).slice(1);
  const box = document.getElementById("produkMember");

  rows.forEach(r=>{
    const c = r.split(/,(?=(?:[^"]*"[^"]*")*[^"]*$)/);
    if(!c[1] || !c[7]) return;

    box.innerHTML += `
    <div class="product-card bg-white rounded shadow p-3"
         data-upload="${c[0]}">
      <div class="member-timer text-xs font-semibold mb-1"></div>
      <h3 class="font-bold">${c[1]}</h3>
      <p class="text-xs text-gray-600">${c[2]||""}</p>
      <p class="text-xs text-gray-500">ğŸ“ ${c[10]||""}</p>
      <p class="text-green-600 font-bold mt-1">
        Rp ${Number(c[7]).toLocaleString("id-ID")}
      </p>
    </div>`;
  });

  updateTimers();
  setInterval(updateTimers,1000);
});

function updateTimers(){
  document.querySelectorAll(".product-card[data-upload]").forEach(card=>{
    const diff = parseTanggalID(card.dataset.upload) + DURATION - Date.now();
    if(diff<=0){ card.remove(); return; }

    const d = Math.floor(diff/86400000);
    const h = Math.floor((diff%86400000)/3600000);

    card.querySelector(".member-timer").innerText =
      `â³ Sisa ${d>0?d+" hari ":""}${h} jam`;
  });
}
</script>

<!-- ================= SEARCH (AMAN) ================= -->
<script>
document.getElementById("searchProduk").addEventListener("input",function(){
  const k=this.value.toLowerCase();
  document.querySelectorAll(".product-card").forEach(c=>{
    c.style.display = c.innerText.toLowerCase().includes(k) ? "" : "none";
  });
});
</script>

</body>
</html>